#! /usr/bin/bash

ABS_PATH=$(readlink -f "$0")
FRONTEND_PATH=$(dirname $ABS_PATH)
PROJECT_PATH=$(dirname $FRONTEND_PATH)
ENVFILE_PATH="$PROJECT_PATH/backend-flask.env"

echo $ENVFILE_PATH

docker run --rm \
    --env-file $ENVFILE_PATH \
    --network cruddur-net \
    --publish 4567:4567 \
    -it backend-flask-prod /bin/bash

# -e FRONTEND_URL="${FRONTEND_URL}" \
# -e BACKEND_URL="${BACKEND_URL}" \
# -e AWS_RDS_POSTGRES_ENDPOINT="${AWS_RDS_POSTGRES_ENDPOINT}" \
# -e AWS_DYNAMODB_ENDPOINT="${AWS_DYNAMODB_ENDPOINT}" \
# -e AWS_DYNAMODB_TABLE="${AWS_DYNAMODB_TABLE}" \
# -e OTEL_SERVICE_NAME="backend-flask" \
# -e OTEL_EXPORTER_OTLP_ENDPOINT="https://api.honeycomb.io" \
# -e OTEL_EXPORTER_OTLP_HEADERS="x-honeycomb-team=${HONEYCOMB_API_KEY}" \
# -e AWS_DEFAULT_REGION="${AWS_DEFAULT_REGION}" \
# -e AWS_ACCESS_KEY_ID="${AWS_ACCESS_KEY_ID}" \
# -e AWS_SECRET_ACCESS_KEY="${AWS_SECRET_ACCESS_KEY}" \
# -e AWS_COGNITO_USER_POOL_ID="${AWS_COGNITO_USER_POOL_ID}" \
# -e AWS_COGNITO_USER_POOL_CLIENT_ID="${AWS_COGNITO_USER_POOL_CLIENT_ID}" \
# -e AWS_XRAY_URL="*${BACKEND_URL}*" \
# -e AWS_XRAY_DAEMON_ADDRESS="xray-daemon:2000" \
# -e ROLLBAR_ACCESS_TOKEN="${ROLLBAR_ACCESS_TOKEN}" \
# -e HONEYCOMB_API_KEY="${HONEYCOMB_API_KEY}" \
# -e HONEYCOMB_SERVICE_NAME="cruddur" \